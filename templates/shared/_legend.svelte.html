<div class="legend cf">
  <div class="label legend-title">{ title || 'Median response time' }</div>

  {#each fullColorSteps as step, si}
    <div class="legend-item">
      <div class="legend-swatch" style="background-color: { colorScale(step) };"></div>
      <div class="legend-label">{ si === 0 ? `<${toMinutes(fullColorSteps[si + 1])}` : toMinutes(step, '+') }</div>
    </div>
  {/each}

  <div class="legend-item">
    <div class="legend-swatch no-incidents"></div>
    <div class="legend-label">Less than 10 incidents</div>
  </div>
</div>

<script>
  import { colorSteps, colorScale } from "../../app/shared/color-scale.js";

  export default {
    helpers: {
      toMinutes(seconds, suffix = "") {
        return `${Math.floor(seconds / 60)} m
            ${
              seconds % 60
                ? " " +
                  Math.round(seconds % 60)
                    .toString()
                    .padStart(2, "0") +
                  " s"
                : ""
            }
              ${suffix}`;
      }
    },

    data() {
      return {
        colorSteps,
        fullColorSteps: [0].concat(colorSteps),
        colorScale
      };
    }
  };
</script>
